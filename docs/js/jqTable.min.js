$(function(){var O={fixedLeft:false,fixedRight:false,fixedMinWidth:100,fixedMaxWidth:500,totalString:"--",totalTitle:"总计",handleSortData:{},noWidthColAdaptClient:false};var c=w();var s='<div class="c-table__sort {{class}}"><i class="c-table__down" aria-hidden="true"></i><i class="c-table__up" aria-hidden="true"></i></div >';var p='<div class="c-table__fixed-header-wrapper">{{theadHtml}}</div><div class="c-table__fixed-body-wrapper"> {{tbodyHtml}}</div>';var d='<div class="c-table__fixed"> {{fixedWrapper}}</div>';var v='<div class="c-table__fixed-right"> {{fixedWrapper}}</div>';var z='<div class="c-table--main" style="width: 100%;"><div class="c-table__header-wrapper"> {{theadHtml}}</div><div class="c-table__body-wrapper"> {{tbodyHtml}}</div> {{fixedLeft}}{{fixedRight}}</div>';var D='<td class="gutter"></td>';var B='<td class="gutter" style="width:'+c+'px;"></td>';var y='<div class="c-table__fixed-right-patch" style="width: '+c+'px; height: {{headerHeight}}px;"></div>';$("body").on("click.jqTable",".c-table__down",function(){n($(this),true)});$("body").on("click.jqTable",".c-table__up",function(){n($(this),false)});function M(X,Y){this.$container=Y;this.config=$.extend({},O,X);this.init(this.$container)}$.extend(M.prototype,{init:function(Y){this.isSafria=/version\/([\d.]+).*safari/i.test(navigator.userAgent);this.render(Y);this.event(Y);var Z=this;var X=this.$table.find(".c-table__sort");if(X){$.each(X,function(aa,ab){if($(ab).hasClass("activeUp")){$(ab).find(".c-table__up").trigger("click.jqTable");Z.updateEvent();return false}if($(ab).hasClass("activeDown")){$(ab).find(".c-table__down").trigger("click.jqTable");Z.updateEvent();return false}})}$(window).trigger("resize")},render:function(aa){var ab=this;var Y=C(ab,aa).data("table",ab);if(!ab.$table){ab.tableHeight=aa.data("height");var X=aa.parents(".c-table").last();Y.addClass(X.attr("class"));X.removeAttr("class");aa.after(Y).remove();ab.$table=Y;ab.$table.data("height",ab.tableHeight)}else{ab.$table.html(Y.html());Y=ab.$table}Y.find("table").addClass("c-table--noWp100");ab.colJson=e(ab);Y.find("table").removeClass("c-table--noWp100");ab.totalJson=W(ab);ab.fixedWidth=ab.colJson.isAllWidth;ab.headerHeight=o(ab.$table);if(!ab.totalJson.noTotal){ab.totalArr=m(ab)}if(ab.fixedWidth){var Z=ab.colJson.width.reduce(b,0);ab.$table.width(Z+1)}if(!document.addEventListener){H(ab)}else{I(ab)}},event:function(X){var Y=this;$(window).resize(function(){I(Y.$table.data("table"))});this.updateEvent()},updateEvent:function(){var Z=this;if(document.addEventListener){Z.$table.find(".c-table__body-wrapper").scroll(function(){var ae=$(this);var ab=ae.parents(".c-table--main");var ag=ae.scrollLeft();var ac=ae.scrollTop();var af=ab.find(".c-table__header-wrapper table");var ad=ab.find(".c-table__footer-wrapper table");var aa=ab.find(".c-table__fixed-body-wrapper table");af.css({"margin-left":-ag+"px"});ad.css({"margin-left":-ag+"px"});aa.css({"margin-top":-ac+"px"})});var Y={isInit:false,scrollTop:0,timer:"",prevTop:0,maxScroll:0,bodyStyle:"",isFirst:false,isBodyScroll:function(){return($("html")[0].scrollHeight-$("html")[0].clientHeight)>0}};Z.$table.find(".c-table__fixed-body-wrapper").on("mousewheel",function(aa){clearTimeout(Y.timer);var ab=$(this).parents(".c-table--main");var ad=ab.find(".c-table__body-wrapper");var ae=ab.data("table");if(!ae.scrollResult.colScroll){return}Y.timer=setTimeout(function(){X();if(Y.isBodyScroll()){$("body").attr("style",Y.bodyStyle);Y.isFirst=false}},500);if(!Y.isFirst&&Y.isBodyScroll()){Y.isFirst=true;Y.bodyStyle=$("body").attr("style");$("body").css({overflow:"hidden","padding-right":c+"px"})}if(!Y.isInit){Y.isInit=true;Y.scrollTop=ad.scrollTop();Y.maxScroll=ad.find("table").height()-ad.height();if(ae.scrollResult.rowScroll){Y.maxScroll+=c}return}if(Y.prevTop>Math.abs(aa.deltaY)){X();return}Y.prevTop=Math.abs(aa.deltaY);var ac=-Y.scrollTop+aa.deltaY;if(ac>0){ac=0}if(ac<(-Y.maxScroll)){ac=-Y.maxScroll}ab.find(".c-table__fixed-body-wrapper table").css({"margin-top":ac+"px"});ad.scrollTop(-ac)});function X(){Y.isInit=false;Y.scrollTop=0;Y.prevTop=0}}if(Z.config.fixedLeft||Z.config.fixedRight){Z.$table.find("tbody tr").hover(function(){var ad=$(this);var ac=ad.parents(".c-table--main");var ab=ad.parents("tbody").find("tr").index(ad);var aa=ac.find("tbody");$.each(aa,function(af,ae){$(ae).find("tr").eq(ab).addClass("hover-row")})},function(){var aa=$(this).parents(".c-table--main").find("tbody");aa.find("tr").removeClass("hover-row")})}},updateHtml:function(X){this.init($(X))},updateHeight:function(X){this.tableHeight=X||this.$table.data("height");this.$table.data("height",this.tableHeight);var Z=this.tableHeight-this.headerHeight;var Y=this.tableHeight;if(this.scrollResult.rowScroll){Z-=c;Y-=c}if(this.config.fixedRight||this.config.fixedLeft){this.$table.find(".c-table__fixed-body-wrapper").css({"max-height":Z+"px",top:this.headerHeight+"px"})}if(this.config.fixedLeft){this.$table.find(".c-table__fixed").height(Y+"px")}if(this.config.fixedRight){this.$table.find(".c-table__fixed-right").height(Y+"px")}I(this)}});function n(ah,Z){var ae=Z?"activeDown":"activeUp";var ab=ah.parents(".c-table--main");var ad=ab.data("table");var aj=ab.find(".c-table__fixed-body-wrapper tbody");var Y=ab.find(".c-table__body-wrapper table tbody");var aa=Y.find("tr");var ai=ah.parents("thead").find("th");var ag=[];var ac=ai.index(ah.parents("th"));ab.find(".c-table__sort").removeClass("activeUp activeDown");ab.find(".c-table__fixed-header-wrapper th").eq(ac).find(".c-table__sort").addClass(ae);ab.find(".c-table__header-wrapper th").eq(ac).find(".c-table__sort").addClass(ae);if(aa.length<=1){return}$.each(aa,function(am,al){var ak={};ak.index=am;ak.value=$(al).find("td").eq(ac).text().trim();ag.push(ak)});var af=ad.config.handleSortData;var X=ad.sortConfig;if(X[ac]){if(X[ac]&&af[X[ac]]&&typeof(af[X[ac]])==="function"){ag=af[X[ac]](ag)}else{ag=g(ag,X[ac])}}ag=F(ag,"value",Z);x(ad,Y,ag);$.each(aj,function(ak,al){x(ad,$(al),ag)})}function g(ab,ac){var X=[];var aa;var Z=new RegExp(ac,"g");for(var Y=0;Y<ab.length;Y++){aa=ab[Y];aa.value=(aa.value+"").replace(Z,"");X.push(aa)}return X}function x(ae,Y,ad){var ac=Y.find("tr");var Z=Y.clone();Z.html("");for(var ab=0,X=ad.length;ab<X;ab++){var aa=ad[ab].index;Z.append(ac.eq(aa).clone())}Y.replaceWith(Z);ae.updateEvent()}function F(X,Z,aa){var Y;if(X.length<2){return}if(isNaN(X[0][Z])){Y=G}else{Y=u}X.sort(function(ac,ab){var ae=ac[Z],ad=ab[Z];if(aa){ae=ab[Z];ad=ac[Z]}return Y(ae,ad)});return X}function u(Y,X){return Y-X}function G(Y,X){var aa=Y.toLowerCase(),Z=X.toLowerCase();if(aa<Z){return -1}if(aa>Z){return 1}return 0}function j(aa,ac){var ag=f(aa,ac);if(ag.noSort){return}aa.sortConfig=ag.sortConfig;var ae=ag.sort;var af=ac.find("thead th");for(var Y=0,ab=ae.length;Y<ab;Y++){var X=ae[Y];if(X){var ad=X==="up"?"activeUp":X==="down"?"activeDown":"";var Z=$(s.replace("{{class}}",ad));af.eq(Y).find(".cell").append(Z)}}}function o(X){return X.find(".c-table__header-wrapper").height()}function C(ac,ae){var ad=ae.clone().addClass("c-table__header");var Z=ae.clone().addClass("c-table__body");ad.find("tbody").remove();Z.find("thead").remove();j(ac,ad);var X=ad[0].outerHTML;var ah=Z[0].outerHTML;var ab=p.replace("{{theadHtml}}",X).replace("{{tbodyHtml}}",ah);var Y=ac.config.fixedLeft?d.replace(/{{fixedWrapper}}/g,ab):"";var af=ac.config.fixedRight?v.replace(/{{fixedWrapper}}/g,ab):"";var ag=z.replace("{{theadHtml}}",X).replace("{{tbodyHtml}}",ah).replace("{{fixedLeft}}",Y).replace("{{fixedRight}}",af);var aa=$(ag);return aa}function H(ac){var Y=ac.$table;var ab=Y.find(".c-table__body-wrapper");var X=ab.find("table");var Z;var aa=ac.colJson;V(ac);Z=K(ab,X,Y,aa);if(!ac.fixedWidth){R(ac,Y,aa,Z)}Q(Y,Z);if(ac.fixedWidth){L(ac,Y,Z)}Z=K(ab,X,Y,aa);ac.scrollResult=Z;if(ac.config.fixedRight||ac.config.fixedLeft){l(ac,Y,Z);J(ac,Y,Z)}else{Y.addClass("el-table--enable-row-transition")}if(Z.colScroll&&!Y.find(".c-table__fixed-right-patch").length){ab.after(y.replace("{{headerHeight}}",ac.headerHeight))}else{if(!Z.colScroll){Y.find(".c-table__fixed-right-patch").remove()}}if(!ac.totalJson.noTotal){P(ac,Y)}}function I(X){if(!document.addEventListener){return}H(X)}function P(ad,Y){var ac=Y.find(".c-table__body-wrapper");var X=ac.clone().removeClass("c-table__body-wrapper").addClass("c-table__footer-wrapper");X.find(".c-table__body").removeClass(".c-table__body").addClass("c-table__footer");var ab=X.find("tbody tr:not(:first)").remove();var Z=Y.find(".c-table__footer-wrapper");if(Z.length){Z.replaceWith(X)}else{ac.after(X)}var aa=X.find("tbody tr").eq(0).find("td");$.each(aa,function(ae,af){aa.find(".cell").eq(ae).html(ad.totalArr[ae])})}function i(Y,Z){Z=Z||1;var X=Math.pow(10,Z);return parseInt(Y*X,10)/X}function m(ab){var ac=ab.totalJson;var aa=ab.$table.find(".c-table__body-wrapper").find("tbody tr");var af=[ab.config.totalTitle];var X=[];var Y=ab.config.totalString;$.each(aa,function(ag,ah){var ai=$(ah).find("td");$.each(ai,function(aj,ak){if(ag===0){X.push([])}X[aj].push($(ak).text().trim())})});var ae;for(var Z=1;Z<ac.total.length;Z++){var ad=ac.total[Z];if(ad){ae=X[Z].reduce(r,0)}else{ae=Y}af.push(ae)}return af}function J(ag,ae,X){var ab=ae.find(".g-selectAll--input");if(!ab.length){return}var ac=ae.find(".c-table__fixed");var aa=ae.find(".c-table__fixed-right");var ad=ae.find(".c-table__body-wrapper tr");var ah,af=ag.colJson.width.length-1;var Y=S(ad,0);var Z=S(ad,af);if(ag.config.fixedLeft&&Y){A(aa,ad,0)}if(ag.config.fixedRight&&Z){A(ac,ad,af)}}function A(Y,Z,X){var aa=Y.find(".c-table__fixed-body-wrapper tr");if(Y.length){$.each(aa,function(ac,ab){k(ab,X)})}$.each(Z,function(ac,ab){k(ab,X)})}function k(Y,X){$(Y).find("td").eq(X).find(".g-selectAll--input").remove()}function S(Y,X){return Y.eq(0).find("td").eq(X).find(".g-selectAll--input").length}function l(ai,aa,ah){var ak=ai.colJson.width.length;var Z=aa.find(".c-table__header-wrapper table th");var af=aa.find(".c-table__body-wrapper table tr").eq(0);var aj=af.find("td:not(.gutter)");var ar=ai.headerHeight;var at=aa.height();var an=aa.width();var ae=at-ar;var aq=aa.find(".c-table__fixed");var ap=aa.find(".c-table__fixed-right");var ac=ai.config;var ag=ac.fixedLeft;var ad=ac.fixedRight;var ao="c-table__fixed--shadow";if(ah.rowScroll){ae-=c}if(ai.config.fixedRight||ag){aa.find(".c-table__fixed-body-wrapper").css({"max-height":ae+"px",top:ai.headerHeight+"px"});if(ah.rowScroll){aq.addClass(ao);ap.addClass(ao)}else{aq.removeClass(ao);ap.removeClass(ao)}}if(ag&&ag<=1){aq.find(".c-table__fixed-body-wrapper tr td:not(:first-child):not(.gutter)").addClass("is-hidden")}else{if(ag>1){$.each(aq.find(".c-table__fixed-body-wrapper tr"),function(av,au){$.each($(au).find("td:not(.gutter)"),function(aw,ax){if(aw>=ag){$(ax).addClass("is-hidden")}})})}}if(ad&&ad<=1){ap.find(".c-table__fixed-body-wrapper tr td:not(:nth-child("+ak+")):not(.gutter)").addClass("is-hidden")}else{if(ad>1){$.each(ap.find(".c-table__fixed-body-wrapper tr"),function(av,au){$.each($(au).find("td:not(.gutter)"),function(aw,ax){if(aw<=ak-ad-1){$(ax).addClass("is-hidden")}})})}}var am=ah.rowScroll?at-c:at;if(!ai.totalJson.noTotal){am-=af.height()}if(ag){var al=0;if(ag<=1){al=aj.eq(0).width()}else{if(ag>1){for(var ab=0;ab<ag;ab++){al+=aj.eq(ab).width()}}}aq.width(al).height(am);if(ai.colJson.isAllWidth===true){aq.find("table").width(an)}}if(ai.config.fixedRight){var Y=ah.colScroll?c:0;var X=0;if(ad<=1){X=aj.eq(aj.length-1).width()}else{if(ad>1){for(var ab=0;ab<ad;ab++){X+=aj.eq(aj.length-1-ab).width()}}}ap.width(X).height(am).css({right:Y});if(ai.colJson.isAllWidth===true){ap.find("table").width(an)}}}function L(ad,Y,ab){var Z=Y.find(".c-table__header-wrapper table");var X=Y.find(".c-table__body-wrapper table");var aa=ad.colJson.width.reduce(b,0);var ac=ab.colScroll?aa+c:aa;Y.width(ac+1);Z.width(aa);X.width(aa)}function Q(Y,ab){var Z=Y.find(".c-table__header-wrapper table");var X=Y.find(".c-table__body-wrapper table");var aa=Z.find(".gutter").length;if(aa){Z.find(".gutter").remove();X.find(".gutter").remove()}}function V(ad){var Y=ad.$table;var Z=ad.$table.data("height");if(Z){var ac=Y.find(".c-table__body-wrapper");Y.css({"max-height":Z+"px"});ac.css({"max-height":"none"});var ab=ad.headerHeight;var X=Y.height();var aa=X-ab;if(!ad.totalJson.noTotal){aa-=ac.find("tbody tr").eq(0).height()}ac.css({"max-height":aa+"px"})}}function R(ai,ag,ak,Z){var X=ag.find("colgroup");var aj=ag.width();var ab=ak.noWidthIndex.length;var aa=ak.tdWidth.reduce(b,0);if(Z.colScroll){aa+=c}var Y=ai.config.fixedMinWidth;var ad=ai.config.noWidthColAdaptClient;var af=[];for(var ae=0;ae<ab;ae++){var al=ak.noWidthIndex[ae];af.push(ak.tdWidth[al])}var ac=af.reduce(b,0);var ah=aj-aa+ac-2;if(af.length*Y>=ah){U(ai,X,ak,af,Y)}else{af=N(af,ah,Y,af.length,ad);U(ai,X,ak,af,false)}aa=ak.width.reduce(b,0)+2;ag.find(".c-table__header-wrapper table").width(aa);ag.find(".c-table__body-wrapper table").width(aa);ag.find(".c-table__fixed-header-wrapper table").width(aa-2);ag.find(".c-table__fixed-body-wrapper table").width(aa-2)}function U(ad,X,af,ac,Y){var Z=af.noWidthIndex.length;var ae=[];for(var ab=0;ab<Z;ab++){var ag=af.noWidthIndex[ab];if(/^\d+\.\d{4,}$/.test(ac[ab]+"")){ac[ab]=Number(ac[ab]).toFixed(3)}var aa=Y&&ac[ab]<Y?Y:ac[ab];af.width[ag]=Number(aa);if(aa>=ad.config.fixedMaxWidth){ae.push(ag)}$.each(X,function(ah,ai){$(ai).find("col").eq(ag).attr("width",aa)})}a(ad,X,af,ae)}function a(ab,Y,aa,X){if(ab.isSafria){var Z=aa.noWidthIndex;if(X.length>0){E(Y,aa,X,true);Z=Z.filter(function(ac){return X.indexOf(ac)===-1})}if(Z.length){E(Y,aa,Z,false)}}}function E(Y,ab,X,aa){for(var Z=0;Z<X.length;Z++){var ac=X[Z];$.each(Y,function(ag,ae){var af=$(ae).parents("table").find("tbody tr");var ad=aa?ab.width[ac]-36:"auto";$.each(af,function(ai,ah){$(ah).find("td").eq(ac).find(".cell").width(ad)})})}}function N(af,Z,ac,aa,ai){var ag=af.reduce(r,0);var Y=(Z-ag)/aa;if(!ai&&Y<0){return af}else{var ah=0;var aj=0;var X=0;if(Y>0){for(var ae=0;ae<af.length;ae++){af[ae]=af[ae]+Y;af[ae]<ac?af[ae]=ac:X++}}else{for(var ad=0;ad<af.length;ad++){if(af[ad]<ac){af[ad]=ac}else{if(af[ad]>ac){var ab=af[ad]+Y;if(ab>ac){X++}af[ad]=ab<ac?ac:ab}}}}ag=af.reduce(r,0);if(Math.floor(ag)!==Math.floor(Z)){N(af,Z,ac,X,ai)}return af}}function h(Z,Y){var X=Y<Z.config.fixedMinWidth?Z.config.fixedMinWidth:Y;return X}function b(Y,X){return Y+X}function r(Y,X){return i(Y-(-X))}function w(){var Z=document.createElement("p");Z.style.width="100%";Z.style.height="200px";var aa=document.createElement("div");aa.style.position="absolute";aa.style.top="0px";aa.style.left="0px";aa.style.visibility="hidden";aa.style.width="200px";aa.style.height="150px";aa.style.overflow="hidden";aa.appendChild(Z);document.body.appendChild(aa);var Y=Z.offsetWidth;aa.style.overflow="scroll";var X=Z.offsetWidth;if(Y==X){X=aa.clientWidth}document.body.removeChild(aa);return(Y-X)}function f(ab,Y){var Z=Y.find("colgroup>col");var X=T("sort",Z);var aa=T("sortconfig",Z);return{sort:X.demo,noSort:X.nodemo,sortConfig:aa.demo}}function W(ac){var Z=ac.$table.find(".c-table__header-wrapper table");var aa=Z.find("colgroup>col");var X=T("total",aa);var ab=X.demo;var Y=X.nodemo;return{total:ab,noTotal:Y}}function T(X,aa){var ab=[];var Z=0;aa=aa.not("[name=gutter]");$.each(aa,function(ae,ad){var ac=$(ad).data(X);ab.push(ac);if(ac){Z++}});var Y=Z?false:true;return{demo:ab,nodemo:Y}}function t(aa,Y,X){var ab=aa.eq(X).width();var Z=Y.eq(X).width();return ab>Z?ab:Z}function e(ab){ab.$table.addClass("c-table--noWrap-init");var ae=ab.$table.find(".c-table__header-wrapper table");var aa=ab.$table.find(".c-table__body-wrapper table");var ai=ae.find("colgroup>col");var ah=ae.width();var Z=aa.width();var Y=[];var ac=[];var ak=ah>Z?ah:Z;var ad=[];var ag=[];var aj=true;var X=aa.find("tr").eq(0).find("td");var af=ae.find("tr").eq(0).find("th");ai=ai.not("[name=gutter]");$.each(ai,function(ao,am){var al=$(am).attr("width")?Number($(am).attr("width")):0;al=q(ab,al);Y.push(al);if(al){ag.push(al);ac.push(al)}else{var an=q(ab,t(X,af,ao)+1);aj=false;ad.push(ao);ac.push(an)}});ab.$table.addClass("c-table__cell--block").removeClass("c-table--noWrap-init");return{width:Y,noWidthIndex:ad,hasWidthArr:ag,isAllWidth:aj,realTotalWidth:ak,tdWidth:ac}}function q(Z,Y){var X=Y>Z.config.fixedMaxWidth?Z.config.fixedMaxWidth:Y;return X}function K(ad,Y,Z,ab){var ac=ad.height()<Y.height();var X=ab.width.reduce(b,0)+1;if(ac){X+=c}var aa=X>Z.width();if(aa){ac=ad.height()-c<Y.height()}return{rowScroll:aa,colScroll:ac}}$.fn.jqTable=function(X){return this.each(function(){new M(X,$(this))})}}());